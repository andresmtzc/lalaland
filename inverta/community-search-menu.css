/**
 * Community Search Menu - Circular Interactive Menu
 * Designed with /search.html and configured via client-config.js
 */

/* ===== CSS VARIABLES ===== */
:root {
  --csm-stage: 620px;           /* Canvas size */
  --csm-btn: 56px;              /* Center button size */
  --csm-orbit-radius: 80;       /* Main dots orbit radius (px) */
  --csm-dot: 56px;              /* Main dot size */
  --csm-mini-orbit-radius: 40;  /* Mini-dots orbit radius */
  --csm-mini-dot: 24px;         /* Mini-dot size */
  --csm-rotate-deg: 0deg;       /* Rotation applied to all dots */
}

/* ===== STAGE CONTAINER ===== */
.community-search-stage {
  width: var(--csm-stage);
  height: var(--csm-stage);
  position: fixed;
  left: 50%;
  bottom: 0;
  transform: translateX(-50%);
  user-select: none;
  touch-action: manipulation;
  pointer-events: none;
}

.csm-rotator {
  position: absolute;
  inset: 0;
  transform-origin: 50% 50%;
  transform: rotate(var(--csm-rotate-deg));
  transition: transform 0.12s ease;
  pointer-events: none;
}

/* ===== CENTER BUTTON ===== */
.csm-center-btn {
  position: fixed;
  width: var(--csm-btn);
  height: var(--csm-btn);
  left: 50%;
  bottom: 20px;
  transform: translateX(-50%);
  border-radius: 50%;
  background: #ffffff;
  color: #0a0a0a;
  border: none;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  transition: transform 0.12s ease;
  pointer-events: auto;
  z-index: 1000;
}

.csm-center-btn:hover {
  transform: translateX(-50%) scale(1.05);
}

.csm-center-btn:active {
  transform: translateX(-50%) scale(0.95);
}

/* ===== MAIN DOTS ===== */
.csm-dot-container {
  position: absolute;
  transform: translate(-50%, -50%);
}

.csm-dot {
  width: var(--csm-dot);
  height: var(--csm-dot);
  border-radius: 50%;
  background: #fcfaf3;
  border: 0;
  padding: 0;
  cursor: pointer;
  outline: none;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: 600;
  color: #1a1a1a;
  opacity: 0;
  transform: scale(0.4);
  transition: background 0.12s ease, transform 0.12s ease, opacity 0.2s ease;
  pointer-events: auto;
}

.csm-dot:hover {
  transform: scale(1.05) !important;
}

.csm-dot.hidden {
  opacity: 0 !important;
  transform: scale(0.4) !important;
  pointer-events: none;
}

.csm-dot.visible {
  /* Don't set static opacity/transform - let animation handle it */
}

/* ===== MINI-DOTS (SUB-GROUPS) ===== */
.csm-mini-dots-ring {
  position: absolute;
  width: calc(var(--csm-mini-orbit-radius) * 2px);
  height: calc(var(--csm-mini-orbit-radius) * 2px);
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
}

.csm-mini-dot-container {
  position: absolute;
  transform: translate(-50%, -50%);
}

.csm-mini-dot {
  width: var(--csm-mini-dot);
  height: var(--csm-mini-dot);
  border-radius: 50%;
  background: #60a5fa;
  border: 0;
  padding: 0;
  cursor: pointer;
  outline: none;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 700;
  color: #0a0a0a;
  opacity: 0;
  transform: scale(0.4);
  pointer-events: auto;
  transition: background 0.12s ease, transform 0.12s ease, opacity 0.2s ease;
}

.csm-mini-dot:hover {
  transform: scale(1.05) !important;
}

.csm-mini-dot.visible {
  /* Don't set static opacity/transform - let animation handle it */
}

/* ===== ANIMATIONS ===== */
@keyframes csm-pop-in {
  0% {
    transform: scale(0.4);
    opacity: 0;
  }
  60% {
    transform: scale(1.08);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Animation when menu is active */
.csm-menu-active .csm-dot.visible {
  animation: csm-pop-in 0.35s cubic-bezier(0.25, 1.25, 0.5, 1) forwards;
}

.csm-menu-active .csm-mini-dot.visible {
  animation: csm-pop-in 0.35s cubic-bezier(0.25, 1.25, 0.5, 1) forwards;
}
