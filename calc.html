<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .calculator-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            width: 100%;
            max-width: 500px;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
            font-weight: 600;
        }

        .input-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        input[type="number"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
        }

        select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        select:focus {
            outline: none;
            border-color: #667eea;
        }

        .results {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            border-left: 4px solid #667eea;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e9ecef;
        }

        .result-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .result-label {
            color: #666;
            font-weight: 500;
        }

        .result-value {
            color: #333;
            font-weight: 600;
            font-size: 18px;
        }

        .highlight {
            color: #667eea;
            font-size: 20px;
        }

        .interest-display {
            text-align: center;
            color: #667eea;
            font-weight: 600;
            font-size: 16px;
            margin-top: 10px;
            padding: 8px;
            background: #f0f4ff;
            border-radius: 6px;
        }

        @media (max-width: 600px) {
            .calculator-container {
                padding: 25px;
            }
            
            h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="calculator-container">
        <h1>Payment Calculator</h1>
        
        <div class="input-group">
            <label for="price">Total Price ($)</label>
            <input type="number" id="price" value="579600" min="0" step="1000">
        </div>

        <div class="input-group">
            <label for="downPayment">Down Payment</label>
            <select id="downPayment">
                <!-- Options will be generated by JavaScript -->
            </select>
        </div>

        <div class="input-group">
            <label for="installments">Loan Term</label>
            <select id="installments">
                <!-- Options will be generated by JavaScript -->
            </select>
        </div>

        <div class="interest-display" id="interestDisplay">
            Interest Rate: 17%
        </div>

        <div class="results">
            <div class="result-item">
                <span class="result-label">Down Payment Amount:</span>
                <span class="result-value" id="downPaymentAmount">$115,920</span>
            </div>
            <div class="result-item">
                <span class="result-label">Amount Financed:</span>
                <span class="result-value" id="amountFinanced">$463,680</span>
            </div>
            <div class="result-item">
                <span class="result-label">Monthly Payment:</span>
                <span class="result-value highlight" id="monthlyPayment">$10,315.50</span>
            </div>
        </div>
    </div>

    <script>
        // Interest rates based on loan term (years -> interest rate)
        const INTEREST_RATES = {
            2: 0.13,  // 2 years: 13%
            3: 0.14,  // 3 years: 14%
            4: 0.15,  // 4 years: 15%
            5: 0.16,  // 5 years: 16%
            6: 0.17   // 6 years: 17%
        };

        // DOM Elements
        const priceInput = document.getElementById('price');
        const downPaymentSelect = document.getElementById('downPayment');
        const installmentsSelect = document.getElementById('installments');
        const interestDisplay = document.getElementById('interestDisplay');
        const downPaymentAmountEl = document.getElementById('downPaymentAmount');
        const amountFinancedEl = document.getElementById('amountFinanced');
        const monthlyPaymentEl = document.getElementById('monthlyPayment');

        // Initialize dropdowns
        function initializeDropdowns() {
            // Down payment options: 20% to 50% in 5% increments
            for (let percent = 20; percent <= 50; percent += 5) {
                const option = document.createElement('option');
                option.value = percent;
                option.textContent = `${percent}%`;
                downPaymentSelect.appendChild(option);
            }
            downPaymentSelect.value = 20; // Default 20%

            // Installment options: 2 years to 6 years
            for (let years = 2; years <= 6; years++) {
                const option = document.createElement('option');
                const months = years * 12;
                option.value = months;
                option.textContent = `${years} years (${months} months)`;
                installmentsSelect.appendChild(option);
            }
            installmentsSelect.value = 72; // Default 6 years (72 months)
        }

        // Get interest rate based on loan term
        function getInterestRate(months) {
            const years = months / 12;
            return INTEREST_RATES[years] || INTEREST_RATES[6]; // Default to 6 years if not found
        }

        // Calculate monthly payment using amortization formula
        function calculateMonthlyPayment(principal, annualRate, months) {
            const monthlyRate = annualRate / 12;
            
            // Handle case where interest rate is 0
            if (monthlyRate === 0) {
                return principal / months;
            }
            
            const numerator = principal * monthlyRate * Math.pow(1 + monthlyRate, months);
            const denominator = Math.pow(1 + monthlyRate, months) - 1;
            
            return numerator / denominator;
        }

        // Format currency
        function formatCurrency(amount) {
            return '$' + amount.toLocaleString('en-US', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }

        // Format percentage
        function formatPercentage(decimal) {
            return (decimal * 100).toFixed(0) + '%';
        }

        // Update calculations
        function updateCalculations() {
            const price = parseFloat(priceInput.value) || 0;
            const downPaymentPercent = parseFloat(downPaymentSelect.value) / 100;
            const months = parseInt(installmentsSelect.value);
            const years = months / 12;
            
            // Get interest rate based on term
            const interestRate = getInterestRate(months);

            // Calculate amounts
            const downPaymentAmount = price * downPaymentPercent;
            const amountFinanced = price - downPaymentAmount;

            // Calculate monthly payment
            const monthlyPayment = calculateMonthlyPayment(amountFinanced, interestRate, months);

            // Update display
            interestDisplay.textContent = `Interest Rate: ${formatPercentage(interestRate)} (${years} year${years > 1 ? 's' : ''})`;
            downPaymentAmountEl.textContent = formatCurrency(downPaymentAmount);
            amountFinancedEl.textContent = formatCurrency(amountFinanced);
            monthlyPaymentEl.textContent = formatCurrency(monthlyPayment);
        }

        // Event listeners
        priceInput.addEventListener('input', updateCalculations);
        downPaymentSelect.addEventListener('change', updateCalculations);
        installmentsSelect.addEventListener('change', updateCalculations);

        // Initialize
        initializeDropdowns();
        updateCalculations(); // Initial calculation
    </script>
</body>
</html>