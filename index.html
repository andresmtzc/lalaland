<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La-La Land</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Barlow+Condensed:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root {
    --brand-orange: #ff8400;
    --off-white: #fcfaf3;
    --off-black: #1a1a1a;
    --mid: #777;
    --border: rgba(0,0,0,0.09);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

html { scroll-behavior: smooth; }

body {
    font-family: 'Barlow Condensed', sans-serif;
    line-height: 1.6;
    color: var(--off-black);
    background: var(--off-white);
}

/* ── LOGO ── */
.logo-wrapper {
    position: fixed;
    top: 24px;
    left: 24px;
    z-index: 9999;
}
.logo-wrapper img { height: 40px; display: block; }

/* ── NAV BAR ── */
.nav-bar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 88px;
    background: var(--off-white);
    border-bottom: 1px solid var(--border);
    z-index: 9997;
}

/* ── HEADER ── */
header {
    position: fixed;
    top: 0;
    right: 0;
    padding: 28px 32px;
    z-index: 9998;
}
.lang-toggle { display: flex; gap: 4px; }
.lang-btn {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 14px;
    font-weight: 700;
    color: #999;
    background: transparent;
    border: none;
    padding: 6px 8px;
    cursor: pointer;
    transition: color 0.2s;
}
.lang-btn:hover { color: var(--off-black); }
.lang-btn.active { color: var(--brand-orange); }

/* ── FULL-PAGE SECTIONS ── */
section {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    padding: 80px 40px;
}

/* ── SECTION CHEVRON ── */
.section-chevron {
    position: absolute;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 40px;
    line-height: 1;
    color: var(--brand-orange);
    cursor: pointer;
    animation: bounce 2s ease-in-out infinite;
    user-select: none;
    z-index: 10;
    opacity: 0.75;
    transition: opacity 0.2s;
}
.section-chevron:hover { opacity: 1; }

@keyframes bounce {
    0%, 100% { transform: translateX(-50%) translateY(0); }
    50%       { transform: translateX(-50%) translateY(10px); }
}

/* ── SCROLL PROGRESS (right rail) ── */
.progress-track {
    position: fixed;
    right: 18px;
    top: 50%;
    transform: translateY(-50%);
    width: 2px;
    height: 120px;
    background: rgba(0,0,0,0.08);
    border-radius: 2px;
    z-index: 1000;
}
.progress-fill {
    width: 100%;
    background: var(--brand-orange);
    border-radius: 2px;
    height: 0%;
    transition: height 0.08s linear;
}

/* ── HERO ── */
.hero { text-align: center; }

.hero-content {
    max-width: 1200px;
    padding: 0 40px;
}

.hero h1 {
    font-family: 'Anton', sans-serif;
    font-size: clamp(32px, 8vw, 140px);
    font-weight: 400;
    line-height: 1.05;
    color: var(--off-black);
    text-shadow: 6px 6px 0px var(--brand-orange);
    letter-spacing: 1px;
    text-transform: uppercase;
    width: 100%;
    margin: 0 auto;
}
.hero h1.typing::after {
    content: '|';
    animation: blink 0.7s infinite;
}
@keyframes blink {
    0%, 50%  { opacity: 1; }
    51%, 100% { opacity: 0; }
}

/* ── DEMO SECTION ── */
.demo-section {
    flex-direction: row;
    gap: 72px;
    padding: 80px 60px;
}

.demo-copy {
    max-width: 360px;
    flex-shrink: 0;
}
.demo-copy .eyebrow {
    font-size: 13px;
    font-weight: 700;
    color: var(--brand-orange);
    text-transform: uppercase;
    letter-spacing: 3px;
    margin-bottom: 20px;
}
.demo-copy h2 {
    font-family: 'Anton', sans-serif;
    font-size: clamp(28px, 3.5vw, 48px);
    text-transform: uppercase;
    line-height: 1.05;
    margin-bottom: 16px;
    text-shadow: 3px 3px 0 var(--brand-orange);
}
.demo-copy p {
    font-size: 18px;
    color: var(--mid);
    line-height: 1.6;
    margin-bottom: 32px;
    min-height: 56px;
}

.demo-tabs { display: flex; gap: 10px; flex-wrap: wrap; }

.tab-btn {
    padding: 10px 20px;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 16px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    border: 2px solid var(--border);
    background: transparent;
    color: var(--mid);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
}
.tab-btn:hover { border-color: var(--brand-orange); color: var(--off-black); }
.tab-btn.active {
    border-color: var(--brand-orange);
    color: var(--brand-orange);
    background: rgba(255,132,0,0.06);
}

/* ── PHONE FRAME ── */
.phone-wrap { flex-shrink: 0; position: relative; }

.phone-frame {
    /* Width sized to fill ~80% viewport height via CSS; height set by JS */
    width: min(380px, calc((100vh - 220px) * 0.462));
    background: linear-gradient(145deg, #2c2c2c 0%, #1a1a1a 55%, #252525 100%);
    border-radius: 18px;
    padding: 10px;
    box-shadow:
        0 0 0 1.5px #3d3d3d,
        0 0 0 3px #222,
        inset 0 1px 0 rgba(255,255,255,0.08);
    position: relative;
}

/* Volume buttons — left */
.phone-btn-vol {
    position: absolute;
    left: -4px;
    width: 4px;
    background: #333;
    border-radius: 3px 0 0 3px;
}
.phone-btn-vol.up   { top: 118px; height: 34px; }
.phone-btn-vol.down { top: 166px; height: 34px; }

/* Power button — right */
.phone-btn-power {
    position: absolute;
    right: -4px;
    top: 138px;
    width: 4px;
    height: 64px;
    background: #333;
    border-radius: 0 3px 3px 0;
}

.phone-screen {
    border-radius: 8px;
    overflow: hidden;
    background: #000;
    position: relative;
    /* height set by JS */
}

.phone-screen iframe {
    border: none;
    display: block;
    transform-origin: top left;
    /* width, height, transform set by JS */
}

/* ── FEATURES SECTION ── */
.features-section { padding: 80px 60px; }

.features-inner {
    max-width: 1100px;
    width: 100%;
}
.features-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
    width: 100%;
}
.feat-card {
    padding: 40px 32px;
    background: #fff;
    border-radius: 16px;
    border: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: 16px;
}
.feat-card svg {
    width: 40px;
    height: 40px;
    stroke: var(--brand-orange);
    fill: none;
    stroke-width: 1.5;
    stroke-linecap: round;
    stroke-linejoin: round;
}
.feat-card h3 {
    font-family: 'Anton', sans-serif;
    font-size: 26px;
    text-transform: uppercase;
    line-height: 1;
}
.feat-bullets {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
}
.feat-bullets li {
    font-size: 16px;
    color: var(--mid);
    line-height: 1.4;
    display: flex;
    gap: 8px;
}
.feat-bullets li::before {
    content: '—';
    color: var(--brand-orange);
    flex-shrink: 0;
}

/* ── CLIENTS SECTION ── */
.clients-section { padding: 80px 60px; }

.clients-inner {
    max-width: 900px;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 48px;
}
.clients-label {
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 3px;
    color: var(--mid);
}
.clients-logos {
    display: grid;
    grid-template-columns: repeat(3, auto);
    justify-content: center;
    gap: 72px;
}
.client-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}
.client-item img {
    height: 36px;
    object-fit: contain;
    opacity: 0.45;
    filter: grayscale(1);
    transition: all 0.25s;
}
.client-item img:hover { opacity: 1; filter: grayscale(0); }
.client-city {
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 1.5px;
    color: var(--mid);
    text-transform: uppercase;
}
.clients-stats {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 20px;
    font-weight: 700;
    letter-spacing: 2px;
    color: var(--off-black);
    text-transform: uppercase;
    text-align: center;
}
.clients-stats .dot {
    color: var(--brand-orange);
    margin: 0 10px;
}

/* ── FORM SECTION ── */
.form-section { padding: 80px 40px; }

.form-inner {
    max-width: 520px;
    width: 100%;
    text-align: center;
}
.form-inner h2 {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: clamp(20px, 2.5vw, 30px);
    font-weight: 700;
    line-height: 1.35;
    color: var(--off-black);
    margin-bottom: 40px;
}
form {
    display: flex;
    flex-direction: column;
    gap: 16px;
    text-align: left;
}
form input {
    width: 100%;
    padding: 16px 20px;
    background: #fff;
    border: 1.5px solid var(--border);
    border-radius: 10px;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 18px;
    color: var(--off-black);
    outline: none;
    transition: border-color 0.2s;
}
form input:focus { border-color: var(--brand-orange); }
form input::placeholder { color: #bbb; }
.btn-submit {
    width: 100%;
    padding: 18px;
    background: var(--brand-orange);
    color: #fff;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 20px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    margin-top: 8px;
    transition: all 0.2s;
}
.btn-submit:hover {
    background: #e67700;
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(255,132,0,0.3);
}

/* ── RESPONSIVE ── */
/* ── TUTORIAL BUTTON ── */
.tutorial-wrap {
    display: none;
    justify-content: center;
    margin-top: 20px;
}
.tutorial-wrap.visible { display: flex; }
.tutorial-btn {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 15px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 10px 24px;
    border: 2px solid var(--brand-orange);
    color: var(--brand-orange);
    background: transparent;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
}
.tutorial-btn:hover {
    background: var(--brand-orange);
    color: #fff;
}

@media (max-width: 960px) {
    .demo-section {
        flex-direction: column;
        gap: 48px;
        padding: 60px 24px;
        text-align: center;
    }
    .demo-copy { max-width: 100%; }
    .demo-tabs { justify-content: center; }
    .features-grid { grid-template-columns: 1fr; }
    .features-section { padding: 60px 24px; }
    .clients-section  { padding: 60px 24px; }
    .clients-logos    { gap: 40px; }
    .form-section     { padding: 60px 24px; }
    .phone-frame      { width: min(320px, 80vw); }
}
@media (max-width: 600px) {
    .logo-wrapper img { height: 32px; }
    section.hero { padding-left: 0; padding-right: 0; }
    .hero-content { padding: 0 8px; }
    .hero h1 { text-shadow: 3px 3px 0 var(--brand-orange); }
    .clients-logos { grid-template-columns: 1fr; gap: 32px; }
    .progress-track { display: none; }
    .demo-tabs { gap: 6px; flex-wrap: nowrap; }
    .tab-btn { padding: 5px 8px; font-size: 11px; letter-spacing: 0; }
}
</style>

<script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group identify setPersonProperties setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroups onFeatureFlags addFeatureFlagsHandler onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    posthog.init('phc_gVIOdluBMP7Mshnq3isBacO9uSRCXbk9JxiKEZNFp0a', {
        api_host: 'https://us.i.posthog.com',
        defaults: '2025-11-30'
    })
</script>

</head>
<body>

<!-- Nav background bar -->
<div class="nav-bar"></div>

<!-- Scroll progress indicator -->
<div class="progress-track">
    <div class="progress-fill" id="progressFill"></div>
</div>

<!-- Logo -->
<div class="logo-wrapper">
    <a href="#" onclick="event.preventDefault(); window.location.reload(true);">
        <img src="https://la-la.land/lalaland.svg" alt="La-La Land">
    </a>
</div>

<!-- Header -->
<header>
    <div class="lang-toggle">
        <button class="lang-btn" data-lang="en">EN</button>
        <button class="lang-btn" data-lang="es">ES</button>
    </div>
</header>

<!-- ── HERO ── -->
<section class="hero" id="hero">
    <div class="hero-content">
        <h1 id="heroTitle"></h1>
    </div>
    <div class="section-chevron" data-next="demo">⌄</div>
</section>

<!-- ── DEMO ── -->
<section class="demo-section" id="demo">
    <div class="demo-copy">
        <div class="eyebrow" id="demoEyebrow">El producto</div>
        <h2 id="demoHeading">Lo que tu comprador ve</h2>
        <p id="demoCopy">Mapa interactivo, disponibilidad en tiempo real, vista 360° y cotizador. Sin app, sin contraseña.</p>
        <div class="demo-tabs">
            <button class="tab-btn active" data-tab="comprador">Comprador</button>
            <button class="tab-btn"        data-tab="agente">Agente</button>
            <button class="tab-btn"        data-tab="gerente">Gerente</button>
            <button class="tab-btn"        data-tab="admin">Admin</button>
        </div>
    </div>

    <div class="phone-wrap">
        <div class="phone-frame" id="phoneFrame">
            <div class="phone-btn-vol up"></div>
            <div class="phone-btn-vol down"></div>
            <div class="phone-btn-power"></div>
            <div class="phone-screen" id="phoneScreen">
                <iframe
                    id="demoIframe"
                    src="cpi/index-administrativo.html"
                    title="Demo"
                    loading="lazy"
                    allow="geolocation"
                ></iframe>
            </div>
        </div>
        <div class="tutorial-wrap" id="tutorialWrap">
            <button class="tutorial-btn" id="tutorialBtn">Ver lista de lotes →</button>
        </div>
    </div>

    <div class="section-chevron" data-next="features">⌄</div>
</section>

<!-- ── FEATURES ── -->
<section class="features-section" id="features">
    <div class="features-inner">
        <div class="features-grid">

            <div class="feat-card">
                <svg viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M2 12h20"/>
                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                </svg>
                <h3 id="feat1Title">Street View 360°</h3>
                <ul class="feat-bullets" id="feat1Bullets">
                    <li>El comprador recorre cada calle y lote en 360°</li>
                    <li>Compatible con cualquier celular</li>
                    <li>Sin app, sin contraseña</li>
                </ul>
            </div>

            <div class="feat-card">
                <svg viewBox="0 0 24 24">
                    <rect x="3" y="3" width="7" height="7"/>
                    <rect x="14" y="3" width="7" height="7"/>
                    <rect x="3" y="14" width="7" height="7"/>
                    <rect x="14" y="14" width="7" height="7"/>
                </svg>
                <h3 id="feat2Title">Gestión de lotes</h3>
                <ul class="feat-bullets" id="feat2Bullets">
                    <li>Disponibilidad en tiempo real</li>
                    <li>Cambia estatus y precios desde el mapa</li>
                    <li>Compara lotes lado a lado</li>
                </ul>
            </div>

            <div class="feat-card">
                <svg viewBox="0 0 24 24">
                    <line x1="12" y1="1" x2="12" y2="23"/>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                </svg>
                <h3 id="feat3Title">Cotizador</h3>
                <ul class="feat-bullets" id="feat3Bullets">
                    <li>Calculadora de financiamiento integrada</li>
                    <li>El comprador ve su mensualidad al instante</li>
                    <li>Sin hablar con nadie</li>
                </ul>
            </div>

        </div>
    </div>
    <div class="section-chevron" data-next="clients">⌄</div>
</section>

<!-- ── CLIENTS ── -->
<section class="clients-section" id="clients">
    <div class="clients-inner">
        <div class="clients-label" id="clientsLabel">Liderando la revolución digital junto con La-La Land</div>
        <div class="clients-logos">
            <div class="client-item">
                <img src="https://la-la.land/inverta/inverta.svg" alt="Inverta">
                <span class="client-city">Hermosillo, Son.<br>Boca del Río, Ver.<br>Allende</span>
            </div>
            <div class="client-item">
                <img src="https://la-la.land/cpi/cpi.png" alt="CPI">
                <span class="client-city">Allende, NL</span>
            </div>
            <div class="client-item">
                <img src="https://la-la.land/agora/agora.png" alt="Agora">
                <span class="client-city">Santiago, NL</span>
            </div>
        </div>
        <div class="clients-stats" id="clientsStats">
            +10 fraccionamientos <span class="dot">·</span> +2500 lotes
        </div>
    </div>
    <div class="section-chevron" data-next="form">⌄</div>
</section>

<!-- ── FORM ── -->
<section class="form-section" id="form">
    <div class="form-inner">
        <h2 id="formHeading">¿Listo para tener tu inventario siempre actualizado y tu comprador siempre informado?</h2>
        <form id="contactForm">
            <input type="text" id="f-nombre"     placeholder="Nombre"     required>
            <input type="text" id="f-desarrollo" placeholder="Desarrollo" required>
            <input type="tel"  id="f-whatsapp"   placeholder="WhatsApp"   required>
            <button type="submit" class="btn-submit" id="submitBtn">Quiero una demo</button>
        </form>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function () {

    // ── TRANSLATIONS ──────────────────────────────────────────
    const T = {
        es: {
            heroTitle: 'ELIMINAMOS LA FRICCIÓN ENTRE TU LOTE Y EL COMPRADOR DECIDIDO',
            demoEyebrow: 'El producto',
            tabs: {
                comprador: {
                    label: 'Comprador',
                    heading: 'Lo que tu comprador ve',
                    copy: 'Mapa interactivo, disponibilidad en tiempo real, vista 360° y cotizador. Sin app, sin contraseña.',
                    src: 'cpi/index.html',
                },
                agente: {
                    label: 'Agente',
                    heading: 'Lo que tu agente maneja',
                    copy: 'El agente cotiza, compara lotes y comparte links personalizados con sus prospectos en segundos.',
                    src: 'cpi/index.html#agent',
                },
                gerente: {
                    label: 'Gerente',
                    heading: 'Tu operación en tiempo real',
                    copy: 'Monitorea leads, temperatura de interés y actividad de tu equipo. Todo desde un solo dashboard.',
                    src: 'cpi/lead-dashboard.html',
                },
                admin: {
                    label: 'Admin',
                    heading: 'Control total del inventario',
                    copy: 'Actualiza estatus y precios de lotes directamente en el mapa. Cambios reflejados al instante.',
                    src: 'cpi/index-administrativo.html',
                },
            },
            feat1Title: 'Street View 360°',
            feat1Bullets: [
                'El comprador recorre cada calle y lote en 360°',
                'Compatible con cualquier celular',
                'Sin app, sin contraseña',
            ],
            feat2Title: 'Gestión de lotes',
            feat2Bullets: [
                'Disponibilidad en tiempo real',
                'Cambia estatus y precios desde el mapa',
                'Compara lotes lado a lado',
            ],
            feat3Title: 'Cotizador',
            feat3Bullets: [
                'Calculadora de financiamiento integrada',
                'El comprador ve su mensualidad al instante',
                'Sin hablar con nadie',
            ],
            clientsLabel: 'Liderando la revolución digital junto con La-La Land',
            clientsStats: '+10 fraccionamientos <span class="dot">·</span> +2500 lotes',
            formHeading: '¿Listo para tener tu inventario siempre actualizado y tu comprador siempre informado?',
            placeholderNombre: 'Nombre',
            placeholderDesarrollo: 'Desarrollo',
            placeholderWhatsApp: 'WhatsApp',
            submitBtn: 'Quiero una demo',
        },
        en: {
            heroTitle: 'WE KILL THE FRICTION BETWEEN YOUR LOT AND A READY BUYER',
            demoEyebrow: 'The product',
            tabs: {
                comprador: {
                    label: 'Buyer',
                    heading: 'What your buyer sees',
                    copy: 'Interactive map, real-time availability, 360° views and pricing calculator. No app, no password.',
                    src: 'cpi/index.html',
                },
                agente: {
                    label: 'Agent',
                    heading: 'What your agent manages',
                    copy: 'Agents quote, compare lots and share personalized links with prospects in seconds.',
                    src: 'cpi/index.html#agent',
                },
                gerente: {
                    label: 'Manager',
                    heading: 'Your operation in real time',
                    copy: 'Track leads, interest temperature and team activity — all from one dashboard.',
                    src: 'cpi/lead-dashboard.html',
                },
                admin: {
                    label: 'Admin',
                    heading: 'Full inventory control',
                    copy: 'Update lot status and prices directly on the map. Changes reflected instantly.',
                    src: 'cpi/index-administrativo.html',
                },
            },
            feat1Title: '360° Street View',
            feat1Bullets: [
                'Buyers walk through every street and lot in 360°',
                'Works on any phone',
                'No app, no password',
            ],
            feat2Title: 'Lot Management',
            feat2Bullets: [
                'Real-time availability',
                'Update status and prices on the map',
                'Compare lots side by side',
            ],
            feat3Title: 'Pricing Calculator',
            feat3Bullets: [
                'Built-in financing calculator',
                'Buyer sees monthly payment instantly',
                'No salesperson needed',
            ],
            clientsLabel: 'Leading the digital revolution with La-La Land',
            clientsStats: '+10 developments <span class="dot">·</span> +2500 lots',
            formHeading: 'Ready to keep your inventory always updated and your buyers always informed?',
            placeholderNombre: 'Name',
            placeholderDesarrollo: 'Development',
            placeholderWhatsApp: 'WhatsApp',
            submitBtn: 'Book a demo',
        },
    };

    // ── STATE ─────────────────────────────────────────────────
    function getLang() {
        const saved = localStorage.getItem('lang');
        if (saved) return saved;
        return (navigator.language || '').startsWith('es') ? 'es' : 'en';
    }

    let lang = getLang();
    let activeTab = 'comprador';

    const heroTitle   = document.getElementById('heroTitle');
    const demoEyebrow = document.getElementById('demoEyebrow');
    const demoHeading = document.getElementById('demoHeading');
    const demoCopy    = document.getElementById('demoCopy');
    const demoIframe  = document.getElementById('demoIframe');

    function setBullets(id, items) {
        document.getElementById(id).innerHTML = items.map(b => `<li>${b}</li>`).join('');
    }

    function applyLang() {
        const t = T[lang];
        document.documentElement.lang = lang;
        demoEyebrow.textContent = t.demoEyebrow;
        document.getElementById('feat1Title').textContent = t.feat1Title;
        document.getElementById('feat2Title').textContent = t.feat2Title;
        document.getElementById('feat3Title').textContent = t.feat3Title;
        setBullets('feat1Bullets', t.feat1Bullets);
        setBullets('feat2Bullets', t.feat2Bullets);
        setBullets('feat3Bullets', t.feat3Bullets);
        document.getElementById('clientsLabel').textContent  = t.clientsLabel;
        document.getElementById('clientsStats').innerHTML    = t.clientsStats;
        document.getElementById('formHeading').textContent   = t.formHeading;
        document.getElementById('f-nombre').placeholder      = t.placeholderNombre;
        document.getElementById('f-desarrollo').placeholder  = t.placeholderDesarrollo;
        document.getElementById('f-whatsapp').placeholder    = t.placeholderWhatsApp;
        document.getElementById('submitBtn').textContent     = t.submitBtn;
        document.querySelectorAll('.lang-btn').forEach(b =>
            b.classList.toggle('active', b.dataset.lang === lang));
        applyTab(activeTab);
        startTyping(t.heroTitle);
    }

    function applyTab(tab) {
        activeTab = tab;
        const t = T[lang].tabs[tab];
        demoHeading.textContent = t.heading;
        demoCopy.textContent    = t.copy;
        demoIframe.src          = t.src;
        document.querySelectorAll('.tab-btn').forEach(b => {
            b.classList.toggle('active', b.dataset.tab === tab);
            b.textContent = T[lang].tabs[b.dataset.tab].label;
        });
        // Show tutorial only on buyer tab
        const tutWrap = document.getElementById('tutorialWrap');
        if (tutWrap) {
            const show = tab === 'comprador';
            tutWrap.classList.toggle('visible', show);
            if (show) resetTutorial();
        }
    }

    // ── HERO SIZING ───────────────────────────────────────────
    let heroTargetText = '';
    let typingGen = 0;

    function adjustSize() {
        if (!heroTitle || !heroTargetText) return;
        const curr = heroTitle.textContent;
        heroTitle.style.visibility = 'hidden';
        heroTitle.style.minHeight  = '';
        heroTitle.style.maxHeight  = '';
        // Measure full text + cursor char to account for cursor width during typing
        heroTitle.textContent = heroTargetText + '|';
        let min = 20, max = 200;
        heroTitle.style.fontSize = max + 'px';
        while (max - min > 1) {
            const mid = Math.floor((min + max) / 2);
            heroTitle.style.fontSize = mid + 'px';
            const lh    = parseInt(getComputedStyle(heroTitle).lineHeight);
            const lines = Math.round(heroTitle.scrollHeight / lh);
            if (lines <= 2) min = mid; else max = mid;
        }
        heroTitle.style.fontSize = min + 'px';
        const s = Math.max(3, Math.floor(min * 0.06));
        heroTitle.style.textShadow = `${s}px ${s}px 0px var(--brand-orange)`;
        // Lock height based on full text at the found font size
        heroTitle.textContent = heroTargetText;
        heroTitle.style.minHeight = heroTitle.offsetHeight + 'px';
        heroTitle.style.maxHeight = heroTitle.offsetHeight + 'px';
        heroTitle.textContent = curr;
        heroTitle.style.visibility = '';
    }

    function startTyping(text) {
        heroTargetText = text;
        typingGen++;
        const myGen = typingGen;
        heroTitle.classList.remove('typing');
        heroTitle.textContent = '';
        adjustSize();
        heroTitle.classList.add('typing');
        let i = 0;
        (function tick() {
            if (myGen !== typingGen) return;
            if (i < text.length) {
                heroTitle.textContent += text[i++];
                setTimeout(tick, 35 + Math.random() * 35);
            } else {
                heroTitle.classList.remove('typing');
            }
        })();
    }

    // ── PHONE SCALING ─────────────────────────────────────────
    function scalePhone() {
        const frame  = document.getElementById('phoneFrame');
        const screen = document.getElementById('phoneScreen');
        const iframe = document.getElementById('demoIframe');
        if (!frame) return;
        const innerW  = frame.clientWidth - 20; // 10px padding each side
        const scale   = innerW / 430;
        const scaledH = Math.round(932 * scale);
        iframe.style.width           = '430px';
        iframe.style.height          = '932px';
        iframe.style.transform       = `scale(${scale})`;
        iframe.style.transformOrigin = 'top left';
        screen.style.height          = scaledH + 'px';
        frame.style.height           = (scaledH + 20) + 'px';
    }

    // ── SCROLL PROGRESS ───────────────────────────────────────
    const progressFill = document.getElementById('progressFill');
    function updateProgress() {
        const max   = document.body.scrollHeight - window.innerHeight;
        const ratio = max > 0 ? window.scrollY / max : 0;
        progressFill.style.height = (ratio * 100) + '%';
    }
    window.addEventListener('scroll', updateProgress, { passive: true });

    // ── SECTION CHEVRONS ──────────────────────────────────────
    document.querySelectorAll('.section-chevron').forEach(ch => {
        ch.addEventListener('click', () => {
            const next = document.getElementById(ch.dataset.next);
            if (next) next.scrollIntoView({ behavior: 'smooth' });
        });
    });

    // ── LANG BUTTONS ──────────────────────────────────────────
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            lang = btn.dataset.lang;
            localStorage.setItem('lang', lang);
            applyLang();
        });
    });

    // ── TAB BUTTONS ───────────────────────────────────────────
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', () => applyTab(btn.dataset.tab));
    });

    // ── TUTORIAL ──────────────────────────────────────────────
    const TUTORIAL_STEPS = 12;
    const TUTORIAL_LABELS = {
        es: [
            'Ver lista de lotes →',   // 0
            'Ordenar lista →',        // 1
            'Comparar lotes →',       // 2
            'Ver detalle de lote →',  // 3
            'Cambiar esquema →',      // 4
            'Cómo llegar →',          // 5
            'Chatear →',              // 6
            'Compartir →',            // 7
            'Apartar →',              // 8
            'Favorito →',             // 9
            'Activar GPS →',          // 10
            '↺ Reiniciar',            // 11
        ],
        en: [
            'View lot list →',        // 0
            'Sort list →',            // 1
            'Compare lots →',         // 2
            'View lot detail →',      // 3
            'Change payment plan →',  // 4
            'How to get there →',     // 5
            'Chat →',                 // 6
            'Share →',                // 7
            'Reserve →',              // 8
            'Favorite →',             // 9
            'Enable GPS →',           // 10
            '↺ Restart',              // 11
        ],
    };
    let tutorialStep   = 0;
    let tutorialLotIdx = -1; // base index in baseLots of the highlighted available lot

    function tutorialLabel() {
        return TUTORIAL_LABELS[lang][tutorialStep];
    }

    function resetTutorial() {
        tutorialStep   = 0;
        tutorialLotIdx = -1;
        const btn = document.getElementById('tutorialBtn');
        if (btn) btn.textContent = tutorialLabel();
    }

    function runTutorial() {
        const win = document.getElementById('demoIframe').contentWindow;
        if (!win) return;

        if (tutorialStep === 0) {
            // Step 0: Ver lista de lotes — open modal, scroll to first available lot
            if (win.openModal) win.openModal();
            const baseLots = win.baseLots;
            if (baseLots && baseLots.length) {
                tutorialLotIdx = baseLots.findIndex(l =>
                    ['available', 'featured'].includes((l.availability || '').toLowerCase())
                );
            }
            if (tutorialLotIdx !== -1 && win.scrollToBaseIndex) {
                setTimeout(() => win.scrollToBaseIndex(tutorialLotIdx, true), 450);
            }

        } else if (tutorialStep === 1) {
            // Step 1: Ordenar lista — sort by price
            const sortBtn = win.document.querySelector('.unit-btn-sort');
            if (sortBtn) sortBtn.click();

        } else if (tutorialStep === 2) {
            // Step 2: Comparar lotes — undo sort first, then enter compare mode
            const sortBtn = win.document.querySelector('.unit-btn-sort');
            if (sortBtn && sortBtn.classList.contains('active')) sortBtn.click();
            const compareBtn = win.document.getElementById('compareBtn');
            if (compareBtn) compareBtn.click();

        } else if (tutorialStep === 3) {
            // TODO: Step 3 — Ver detalle de lote

        } else if (tutorialStep === 4) {
            // TODO: Step 4 — Cambiar esquema de pagos

        } else if (tutorialStep === 5) {
            // TODO: Step 5 — Cómo llegar

        } else if (tutorialStep === 6) {
            // TODO: Step 6 — Chatear

        } else if (tutorialStep === 7) {
            // TODO: Step 7 — Compartir

        } else if (tutorialStep === 8) {
            // TODO: Step 8 — Apartar

        } else if (tutorialStep === 9) {
            // TODO: Step 9 — Favorito

        } else if (tutorialStep === 10) {
            // TODO: Step 10 — Activar GPS

        } else if (tutorialStep === 11) {
            // Step 11: Reset
            if (win.closeModal) win.closeModal();
            tutorialLotIdx = -1;
            tutorialStep   = -1; // becomes 0 after +1 below
        }

        tutorialStep = (tutorialStep + 1) % TUTORIAL_STEPS;
        document.getElementById('tutorialBtn').textContent = tutorialLabel();
    }

    document.getElementById('tutorialBtn').addEventListener('click', runTutorial);

    // ── FORM → WHATSAPP ───────────────────────────────────────
    document.getElementById('contactForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const nombre     = document.getElementById('f-nombre').value.trim();
        const desarrollo = document.getElementById('f-desarrollo').value.trim();
        const whatsapp   = document.getElementById('f-whatsapp').value.trim();
        const msg = encodeURIComponent(
            `Hola, quiero una demo de La-La Land.\n\nNombre: ${nombre}\nDesarrollo: ${desarrollo}\nWhatsApp: ${whatsapp}`
        );
        window.open(`https://wa.me/5218185261819?text=${msg}`, '_blank');
    });

    // ── RESIZE ────────────────────────────────────────────────
    let resizeTimer;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => { adjustSize(); scalePhone(); }, 100);
    });

    // ── INIT ──────────────────────────────────────────────────
    const init = () => { applyLang(); scalePhone(); updateProgress(); };
    if (document.fonts && document.fonts.ready) {
        document.fonts.ready.then(init);
    } else {
        init();
    }

});
</script>

</body>
</html>
