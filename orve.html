<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La-La Land</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Barlow+Condensed:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root {
    --brand-orange: #ff8400;
    --off-white: #fcfaf3;
    --off-black: #1a1a1a;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    width: 100%;
    overflow-x: hidden;
}

body {
    font-family: 'Barlow Condensed', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.6;
    color: var(--off-black);
    background: var(--off-white);
    min-height: 100vh;
    width: 100%;
}

/* Logo */
.logo-wrapper {
    position: fixed;
    top: 24px;
    left: 24px;
    z-index: 1000;
}

.logo-wrapper img {
    height: 40px;
    display: block;
    width: auto;
}

/* Header */
header {
    padding: 30px 40px;
    display: flex;
    justify-content: flex-end;
    align-items: center;
    width: 100%;
}

/* Contact Dropdown */
.contact-dropdown {
    position: relative;
    display: inline-block;
}

.contact-options {
    display: none;
    position: absolute;
    top: 100%;
    right: 0;
    background: white;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    min-width: 140px;
    z-index: 1000;
    overflow: hidden;
}

.contact-options a {
    display: block;
    padding: 12px 16px;
    color: var(--off-black);
    text-decoration: none;
    border-bottom: 1px solid #f0f0f0;
    transition: background 0.2s ease;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 16px;
    font-weight: 400;
}

.contact-options a:last-child {
    border-bottom: none;
}

.contact-options a:hover {
    background: #f8f8f8;
}

.contact-dropdown:hover .contact-options {
    display: block;
}

.contact-dropdown button.contact {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 16px;
    color: var(--brand-orange);
    text-decoration: underline;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
}

.contact-dropdown button.contact:hover {
    opacity: 0.7;
}

/* Video Section */
.video-section {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 100px 40px 60px;
    text-align: center;
    width: 100%;
    max-width: 100vw;
}

.video-container {
    margin: 0 auto 40px;
    position: relative;
    display: inline-block;
}

.demo-video {
    max-width: 100%;
    height: auto;
    max-height: 70vh;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
    /* Remove black background and ensure transparency */
    background: transparent;
    /* Let video be its natural size */
    width: auto;
    /* Hide video until it's loaded to prevent black flash */
    opacity: 0;
    transition: opacity 0.3s ease;
}

.demo-video.loaded {
    opacity: 1;
}

/* Loading Spinner */
.loading-spinner {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1;
    opacity: 1;
    transition: opacity 0.3s ease;
}

.loading-spinner.hidden {
    opacity: 0;
    pointer-events: none;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid rgba(255, 132, 0, 0.3);
    border-radius: 50%;
    border-top-color: var(--brand-orange);
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.video-chapters {
    display: grid;
    grid-template-columns: repeat(4, auto);
    gap: 16px;
    justify-content: center;
    margin: 0 auto;
    padding: 20px 0;
    width: 100%;
}

.chapter-btn {
    padding: 16px 28px;
    background: var(--off-white);
    border: 2px solid var(--off-black);
    color: var(--off-black);
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 18px;
    font-weight: 600;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
}

.chapter-btn:hover {
    background: var(--brand-orange);
    border-color: var(--brand-orange);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.chapter-btn:active {
    transform: translateY(0);
}

.chapter-btn.active {
    background: linear-gradient(
        to right,
        rgba(255, 132, 0, 0.2) 0%,
        rgba(255, 132, 0, 0.2) var(--progress, 0%),
        var(--off-white) var(--progress, 0%),
        var(--off-white) 100%
    );
    color: var(--off-black);
}

/* Language Toggle */
.lang-toggle {
    display: flex;
    gap: 4px;
    margin-right: 20px;
}

.lang-btn {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: #999;
    background: transparent;
    border: none;
    padding: 6px 8px;
    cursor: pointer;
    transition: color 0.2s ease;
}

.lang-btn:hover {
    color: var(--off-black);
}

.lang-btn.active {
    color: var(--brand-orange);
}

/* Demo Section */
.demo-section {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 40px;
    background: var(--off-white);
}

.btn-demo {
    padding: 16px 48px;
    background: var(--brand-orange);
    color: white;
    text-decoration: none;
    font-size: 18px;
    font-weight: 600;
    border-radius: 8px;
    display: inline-block;
    transition: all 0.3s ease;
}

.btn-demo:hover {
    background: #e67700;
    transform: translateY(-2px);
}

/* Responsive - MATCHING ORIGINAL LAYOUT */
@media (max-width: 1200px) {
    .video-chapters {
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
    }
}

@media (max-width: 1024px) {
    .video-section {
        padding: 90px 30px 50px;
    }
    
    .video-chapters {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .chapter-btn {
        padding: 14px 20px;
        font-size: 16px;
    }
}

/* MOBILE - 2 COLUMNS LIKE ORIGINAL */
@media (max-width: 768px) {
    .logo-wrapper {
        top: 16px;
        left: 16px;
    }
    
    .logo-wrapper img {
        height: 32px;
    }
    
    header {
        padding: 20px;
    }
    
    .video-section {
        padding: 80px 20px 40px;
    }
    
    /* THIS IS THE FIX: 2 columns on mobile */
    .video-chapters {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        width: 100%;
        max-width: 500px;
    }
    
    .chapter-btn {
        padding: 12px 16px;
        font-size: 15px;
        white-space: normal;
        word-wrap: break-word;
        height: auto;
        min-height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
    }
    
    .demo-video {
        border-radius: 8px;
        max-height: 60vh;
    }
    
    /* Demo Section Responsive */
    .demo-section {
        flex-direction: column;
        gap: 16px;
        padding: 40px 20px;
    }
    
    .btn-demo {
        width: 100%;
        max-width: 300px;
        text-align: center;
        margin: 0 !important;
    }
}

@media (max-width: 480px) {
    .video-section {
        padding: 70px 15px 30px;
    }
    
    .video-chapters {
        grid-template-columns: repeat(2, 1fr); /* STILL 2 columns */
        gap: 8px;
        max-width: 100%;
    }
    
    .chapter-btn {
        padding: 10px 12px;
        font-size: 14px;
        min-height: 40px;
    }
    
    .lang-toggle {
        margin-right: 15px;
    }
    
    .demo-video {
        max-height: 50vh;
    }
    
    .spinner {
        width: 40px;
        height: 40px;
        border-width: 3px;
    }
}

/* Extra small screens - switch to 1 column */
@media (max-width: 360px) {
    .video-chapters {
        grid-template-columns: 1fr;
        max-width: 280px;
    }
}

@media (max-height: 600px) {
    .video-section {
        padding-top: 80px;
        padding-bottom: 30px;
        min-height: 100vh;
    }
    
    .demo-video {
        max-height: 50vh;
    }
}

/* Ensure no horizontal scroll */
.container {
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
}
</style>
</head>

<body>
    <!-- Logo -->
    <div class="logo-wrapper">
        <a href="#" onclick="event.preventDefault(); window.location.reload(true);" title="Reload Site">
            <img src="https://la-la.land/lalaland.svg" alt="La-La Land Logo">
        </a>
    </div>

    <!-- Header with Language and Contact -->
    <header>
        <div style="display: flex; gap: 20px; align-items: center;">
            <div class="lang-toggle">
                <button class="lang-btn" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="es">ES</button>
            </div>
            <div class="contact-dropdown">
                <button class="contact">Contact us</button>
                <div class="contact-options">
                    <a href="https://wa.me/5218185261819" target="_blank">WhatsApp</a>
                    <a href="mailto:andres@la-la.land">Email</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Video Section -->
    <section class="video-section">
        <div class="video-container">
            <div class="loading-spinner">
                <div class="spinner"></div>
            </div>
            <video id="demoVideo" class="demo-video" muted playsinline preload="auto">
                <source src="orve60sec.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        <div class="video-chapters">
            <button class="chapter-btn" data-start="5" data-end="11">Street View</button>
            <button class="chapter-btn" data-start="12" data-end="14">Availability</button>
            <button class="chapter-btn" data-start="16" data-end="19">Finance Calc</button>
            <button class="chapter-btn" data-start="20" data-end="23">GPS</button>
            <button class="chapter-btn" data-start="24" data-end="27">Share</button>
            <button class="chapter-btn" data-start="28" data-end="30">Sold w/ 2 Clicks</button>
            <button class="chapter-btn" data-start="32" data-end="37">Sell 24/7</button>
            <button class="chapter-btn" data-start="53" data-end="56">Sale Insights</button>
        </div>
    </section>

    <!-- Demo Section -->
    <section class="demo-section">
        <a href="https://la-la.land/email?link=mas" class="btn-demo" data-i18n="ctaDemo">Conocer M치s</a>
    </section>

    <script>
        // Video Autoplay & Chapter Navigation
        const demoVideo = document.getElementById('demoVideo');
        const chapterButtons = document.querySelectorAll('.chapter-btn');
        const loadingSpinner = document.querySelector('.loading-spinner');
        
        // Translations
        const translations = {
            en: {
                contact: 'Contact us',
                chapters: {
                  streetView: 'Street View',
                    availability: 'Availability',
                    financeCalc: 'Finance Calc',
                    
                    gps: 'GPS',
                    share: 'Share',
                    sold2Clicks: 'Sold w/ 2 Clicks',
                    sell247: 'Sell 24/7',
                    saleInsights: 'Sale Insights'
                },
                ctaDemo: 'Learn More'
            },
            es: {
                contact: 'Cont치ctanos',
                chapters: {
                  streetView: 'Street View',
                    availability: 'Disponibilidad LIVE',
                    financeCalc: 'Calc. Financiera',
                    
                    gps: 'GPS',
                    share: 'Compartir F치cil',
                    sold2Clicks: 'Vendido en 2 Clics',
                    sell247: 'Vende 24/7',
                    saleInsights: 'Insights de Ventas'
                },
                ctaDemo: 'Conocer M치s'
            }
        };
        
        // Language management
        let currentLang = localStorage.getItem('language') || 'en';
        
        function updateLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('language', lang);
            
            // Update contact button
            document.querySelector('.contact').textContent = translations[lang].contact;
            
            // Update chapter buttons
            const chapterKeys = [
                'streetView', 'availability', 'financeCalc',  'gps',
                'share', 'sold2Clicks', 'sell247', 'saleInsights'
            ];
            
            chapterButtons.forEach((btn, index) => {
                const key = chapterKeys[index];
                if (key && translations[lang].chapters[key]) {
                    btn.textContent = translations[lang].chapters[key];
                }
            });
            
            // Update demo button
            const demoBtn = document.querySelector('.btn-demo');
            if (demoBtn && translations[lang].ctaDemo) {
                demoBtn.textContent = translations[lang].ctaDemo;
            }
            
            // Update language buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                if (btn.getAttribute('data-lang') === lang) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }
        
        // Initialize language
        updateLanguage(currentLang);
        
        // Language button click handlers
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const lang = btn.getAttribute('data-lang');
                updateLanguage(lang);
            });
        });
        
        // Show video when loaded and hide spinner
        function showVideo() {
            demoVideo.classList.add('loaded');
            if (loadingSpinner) {
                loadingSpinner.classList.add('hidden');
            }
        }
        
        // Handle video loading events
        demoVideo.addEventListener('loadeddata', function() {
            // Video has loaded enough to start playing
            showVideo();
        });
        
        demoVideo.addEventListener('canplay', function() {
            // Video can start playing
            showVideo();
        });
        
        demoVideo.addEventListener('error', function() {
            // Handle video loading error
            console.error('Video loading failed');
            if (loadingSpinner) {
                loadingSpinner.classList.add('hidden');
            }
        });
        
        // Start loading video immediately
        demoVideo.load();
        
        // Fallback: if video takes too long to load, show it anyway
        setTimeout(function() {
            if (!demoVideo.classList.contains('loaded')) {
                showVideo();
            }
        }, 3000); // Show video after 3 seconds max
        
        // Autoplay video when it becomes visible
        const videoObserver = new IntersectionObserver(
            (entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        demoVideo.play().catch(err => {
                            console.log('Autoplay prevented:', err);
                        });
                    } else {
                        demoVideo.pause();
                    }
                });
            },
            { threshold: 0.3 }
        );
        
        videoObserver.observe(demoVideo);
        
        // Update active chapter button with progress
        demoVideo.addEventListener('timeupdate', () => {
            const currentTime = demoVideo.currentTime;
            chapterButtons.forEach(button => {
                const start = parseInt(button.getAttribute('data-start'));
                const end = parseInt(button.getAttribute('data-end'));
                if (currentTime >= start && currentTime < end) {
                    button.classList.add('active');
                    // Calculate progress percentage within this chapter
                    const chapterDuration = end - start;
                    const chapterProgress = currentTime - start;
                    const progressPercent = (chapterProgress / chapterDuration) * 100;
                    button.style.setProperty('--progress', `${progressPercent}%`);
                } else {
                    button.classList.remove('active');
                    button.style.setProperty('--progress', '0%');
                }
            });
        });
        
        // Chapter navigation
        chapterButtons.forEach(button => {
            button.addEventListener('click', () => {
                const startTime = parseInt(button.getAttribute('data-start'));
                
                // Immediately cancel all button animations
                chapterButtons.forEach(btn => {
                    btn.classList.remove('active');
                    btn.style.setProperty('--progress', '0%');
                });
                
                // Seek to new time and play immediately
                demoVideo.currentTime = startTime;
                demoVideo.play().catch(err => {
                    console.log('Play prevented:', err);
                });
            });
        });

        // Handle window resize
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                // Force reflow for video
                demoVideo.style.display = 'none';
                void demoVideo.offsetWidth;
                demoVideo.style.display = 'block';
            }, 150);
        });

        // Ensure video plays when user interacts with page
        document.addEventListener('click', () => {
            if (demoVideo.paused) {
                demoVideo.play().catch(e => console.log('Play prevented'));
            }
        }, { once: true });
    </script>
</body>
</html>