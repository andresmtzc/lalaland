<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Community Search Button Designer</title>
<style>
  :root{
    --stage: 520px;      /* canvas size */
    --btn: 56px;         /* center button size */
    --orbit-radius: 80;  /* starting radius (px) */
    --dot: 56px;         /* dot size */
    --rotate-deg: 0deg;  /* rotation applied to all dots */
  }

  * { box-sizing: border-box; }
  html, body {
    height: 100%;
    margin: 0;
    background: #0a0a0a;
    color: #eaeaea;
    font: 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }

  .wrap {
    min-height: 100%;
    display: grid;
    place-items: center;
    padding: 24px;
  }

  .panel { width: min(100%, 1200px); }

  .controls {
    display: grid;
    gap: 12px;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    margin-bottom: 18px;
  }
  .control {
    background: #141414;
    border: 1px solid #242424;
    border-radius: 16px;
    padding: 12px 14px;
  }
  .control label {
    display: block;
    font-size: 12px;
    letter-spacing: .06em;
    text-transform: uppercase;
    color: #9aa0a6;
    margin-bottom: 8px;
  }
  .control input[type="range"]{ width:100%; }

  /* Dot visibility checkboxes */
  .dot-toggles {
    background: #141414;
    border: 1px solid #242424;
    border-radius: 16px;
    padding: 16px;
    margin-bottom: 18px;
  }
  .dot-toggles h3 {
    margin: 0 0 12px 0;
    font-size: 12px;
    letter-spacing: .06em;
    text-transform: uppercase;
    color: #9aa0a6;
  }
  .toggle-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 8px;
  }
  .toggle-item {
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .toggle-item input[type="checkbox"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
  }
  .toggle-item label {
    font-size: 13px;
    color: #eaeaea;
    cursor: pointer;
    user-select: none;
  }

  .stage {
    width: var(--stage);
    height: var(--stage);
    position: relative;
    margin-inline: auto;
    user-select: none;
    touch-action: manipulation;
  }

  .rotator {
    position: absolute;
    inset: 0;
    transform-origin: 50% 50%;
    transform: rotate(var(--rotate-deg));
    transition: transform .12s ease;
  }

  .orbit-guide {
    position: absolute;
    width: calc(var(--orbit-radius) * 2px);
    height: calc(var(--orbit-radius) * 2px);
    left: 50%; top: 50%;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    border: 1px dashed #2c2c2c;
  }

  .dot-container {
    position: absolute;
    transform: translate(-50%, -50%);
  }

  .dot {
    width: var(--dot);
    height: var(--dot);
    border-radius: 50%;
    background: #fcfaf3;
    border: 0;
    padding: 0;
    cursor: pointer;
    outline: none;
    box-shadow: 0 2px 6px rgba(0,0,0,.15);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: 600;
    color: #1a1a1a;
    opacity: 0;
    transform: scale(0.4);
    transition: background .12s ease, transform .12s ease;
  }

  .dot-label {
    position: absolute;
    top: -24px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 11px;
    font-weight: 700;
    color: #60a5fa;
    background: #1a1a1a;
    padding: 2px 6px;
    border-radius: 4px;
    border: 1px solid #2c2c2c;
    pointer-events: none;
  }

  .dot.visible {
    opacity: 1;
    transform: scale(1);
  }

  /* Animation when menu is active */
  .menu-active .dot.visible {
    animation: circle-pop-in 0.35s cubic-bezier(0.25, 1.25, 0.5, 1) forwards;
  }

  @keyframes circle-pop-in {
    0% {
      transform: scale(0.4);
      opacity: 0;
    }
    60% {
      transform: scale(1.08);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .center-btn {
    position: absolute;
    width: var(--btn);
    height: var(--btn);
    left: 50%; top: 50%;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    background: #ffffff;
    color: #0a0a0a;
    border: none;
    box-shadow: 0 10px 30px rgba(0,0,0,.35);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    transition: transform .12s ease;
  }

  .center-btn:hover {
    transform: translate(-50%, -50%) scale(1.05);
  }

  .center-btn:active {
    transform: translate(-50%, -50%) scale(0.95);
  }

  .info-box {
    background: #141414;
    border: 1px solid #242424;
    border-radius: 16px;
    padding: 16px;
    margin-top: 18px;
  }
  .info-box h3 {
    margin: 0 0 8px 0;
    font-size: 12px;
    letter-spacing: .06em;
    text-transform: uppercase;
    color: #9aa0a6;
  }
  .info-box p {
    margin: 4px 0;
    font-size: 13px;
    color: #eaeaea;
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="panel">

      <div class="controls">
        <div class="control">
          <label for="count">Count: <span id="countOut">8</span></label>
          <input id="count" type="range" min="0" max="12" value="8" />
        </div>
        <div class="control">
          <label for="radius">Radius: <span id="radiusOut">80</span> px</label>
          <input id="radius" type="range" min="40" max="240" value="80" />
        </div>
        <div class="control">
          <label for="size">Dot size: <span id="sizeOut">56</span> px</label>
          <input id="size" type="range" min="20" max="120" value="56" />
        </div>
        <div class="control">
          <label for="rotation">Rotation: <span id="rotationOut">0</span>Â°</label>
          <input id="rotation" type="range" min="0" max="360" value="0" />
        </div>
        <div class="control">
          <label for="center">Center size: <span id="centerOut">56</span> px</label>
          <input id="center" type="range" min="40" max="120" value="56" />
        </div>
        <div class="control">
          <label for="delay">Animation delay: <span id="delayOut">150</span> ms</label>
          <input id="delay" type="range" min="50" max="500" value="150" step="50" />
        </div>
      </div>

      <div class="dot-toggles">
        <h3>Show/Hide Individual Dots</h3>
        <div class="toggle-grid" id="toggleGrid">
          <!-- Checkboxes generated here -->
        </div>
      </div>

      <div class="stage" id="stage" aria-label="Orbit stage">
        <div class="rotator" id="rotator">
          <div class="orbit-guide" id="guide"></div>
          <!-- dots injected here -->
        </div>
        <button class="center-btn" id="centerBtn">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor">
            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-width="2" stroke-linecap="round" fill="none"/>
          </svg>
        </button>
      </div>

      <div class="info-box">
        <h3>Instructions</h3>
        <p><strong>Click the center button</strong> to toggle the pop-up animation</p>
        <p><strong>Use checkboxes above</strong> to show/hide specific dots</p>
        <p><strong>Labels show position numbers</strong> (1, 2, 3, etc.) for each dot</p>
        <p><strong>Adjust sliders</strong> to customize size, spacing, rotation, and animation timing</p>
      </div>
    </div>
  </div>

<script>
(function(){
  const rotator   = document.getElementById('rotator');
  const stage     = document.getElementById('stage');
  const guide     = document.getElementById('guide');
  const centerBtn = document.getElementById('centerBtn');
  const toggleGrid = document.getElementById('toggleGrid');

  const countIn    = document.getElementById('count');
  const radiusIn   = document.getElementById('radius');
  const sizeIn     = document.getElementById('size');
  const rotationIn = document.getElementById('rotation');
  const centerIn   = document.getElementById('center');
  const delayIn    = document.getElementById('delay');

  const countOut    = document.getElementById('countOut');
  const radiusOut   = document.getElementById('radiusOut');
  const sizeOut     = document.getElementById('sizeOut');
  const rotationOut = document.getElementById('rotationOut');
  const centerOut   = document.getElementById('centerOut');
  const delayOut    = document.getElementById('delayOut');

  let count    = +countIn.value;
  let radius   = +radiusIn.value;
  let dotSize  = +sizeIn.value;
  let rotation = +rotationIn.value;
  let center   = +centerIn.value;
  let animDelay = +delayIn.value;
  let dots = [];
  let menuActive = false;
  let dotVisibility = {}; // Track which dots are visible

  function setCSSVar(name, value){
    document.documentElement.style.setProperty(name, value);
  }

  function updateOutputs(){
    countOut.textContent    = count;
    radiusOut.textContent   = radius;
    sizeOut.textContent     = dotSize;
    rotationOut.textContent = rotation;
    centerOut.textContent   = center;
    delayOut.textContent    = animDelay;
  }

  function rebuildToggles(){
    toggleGrid.innerHTML = '';
    for(let i=0; i<count; i++){
      const item = document.createElement('div');
      item.className = 'toggle-item';

      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.id = `dot-${i}`;
      checkbox.checked = dotVisibility[i] !== false; // default to visible
      checkbox.addEventListener('change', () => {
        dotVisibility[i] = checkbox.checked;
        updateDotVisibility(i);
      });

      const label = document.createElement('label');
      label.htmlFor = `dot-${i}`;
      label.textContent = `Dot ${i+1}`;

      item.appendChild(checkbox);
      item.appendChild(label);
      toggleGrid.appendChild(item);
    }
  }

  function updateDotVisibility(index){
    if(dots[index]){
      const isVisible = dotVisibility[index] !== false;
      // Only apply visibility if menu is active
      if(menuActive){
        if(isVisible){
          dots[index].el.classList.add('visible');
        } else {
          dots[index].el.classList.remove('visible');
        }
      }
    }
  }

  function rebuildDots(){
    // Save current visibility state
    const oldVisibility = {...dotVisibility};

    dots.forEach(d => d.container.remove());
    dots = [];
    dotVisibility = {};

    for(let i=0; i<count; i++){
      // Restore previous visibility or default to true
      dotVisibility[i] = oldVisibility[i] !== false;

      const container = document.createElement('div');
      container.className = 'dot-container';

      const el = document.createElement('button');
      el.className = 'dot';
      el.textContent = (i+1).toString();

      // Don't add visible class initially - dots are hidden by default
      // They will become visible when menu is activated

      const label = document.createElement('div');
      label.className = 'dot-label';
      label.textContent = `#${i+1}`;

      container.appendChild(label);
      container.appendChild(el);
      rotator.appendChild(container);
      dots.push({el, container, i});
    }

    applySizes();
    positionDots();
    rebuildToggles();
    applyAnimationDelays();
  }

  function applySizes(){
    setCSSVar('--orbit-radius', radius);
    setCSSVar('--dot', dotSize+'px');
    setCSSVar('--btn', center+'px');
  }

  function positionDots(){
    const N = Math.max(1,count);
    const cx = stage.clientWidth/2;
    const cy = stage.clientHeight/2;
    dots.forEach(({container,i})=>{
      const angle = (2*Math.PI*i)/N;
      const x = cx + radius*Math.cos(angle);
      const y = cy + radius*Math.sin(angle);
      container.style.left = x+'px';
      container.style.top  = y+'px';
    });
  }

  function applyAnimationDelays(){
    dots.forEach(({el,i})=>{
      el.style.animationDelay = (i * animDelay) + 'ms';
    });
  }

  function toggleMenu(){
    menuActive = !menuActive;
    if(menuActive){
      rotator.classList.add('menu-active');
      // Add visible class immediately - CSS animation-delay handles the stagger
      dots.forEach(({el, i}) => {
        if(dotVisibility[i] !== false){
          el.classList.add('visible');
        }
      });
    } else {
      rotator.classList.remove('menu-active');
      // Hide all dots immediately
      dots.forEach(({el}) => {
        el.classList.remove('visible');
      });
    }
  }

  // Center button click handler
  centerBtn.addEventListener('click', toggleMenu);

  countIn.oninput = e=>{
    count=+e.target.value;
    updateOutputs();
    rebuildDots();
  }

  radiusIn.oninput= e=>{
    radius=+e.target.value;
    updateOutputs();
    applySizes();
    positionDots();
  }

  sizeIn.oninput  = e=>{
    dotSize=+e.target.value;
    updateOutputs();
    applySizes();
  }

  rotationIn.oninput = e=>{
    rotation=+e.target.value;
    updateOutputs();
    setCSSVar('--rotate-deg',rotation+'deg');
  };

  centerIn.oninput = e=>{
    center=+e.target.value;
    updateOutputs();
    applySizes();
  };

  delayIn.oninput = e=>{
    animDelay=+e.target.value;
    updateOutputs();
    applyAnimationDelays();
  };

  updateOutputs();
  rebuildDots();
  setCSSVar('--rotate-deg', rotation+'deg');
  window.addEventListener('resize', positionDots);
})();
</script>
</body>
</html>
